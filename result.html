<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¨ºæ–­çµæœ</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script>
        async function sendToWebhook() {
            const urlParams = new URLSearchParams(window.location.search);
            const userId = urlParams.get('userId');

            console.log("âœ… Webhookã«é€ä¿¡ã™ã‚‹ userId:", userId);

            if (!userId) {
                console.error("âŒ userIdãŒå–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚");
                return;
            }

            await fetch('https://free-diagnosis.vercel.app/api/webhook', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ userId: userId })
            });
        }

        window.onload = sendToWebhook;
    </script>
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #f0f7f7;
            margin: 0;
            padding: 20px;
            text-align: center;
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .result-box {
            background-color: #fff;
            padding: 40px 30px;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(106, 193, 208, 0.1);
            margin: 0 auto;
            max-width: 600px;
            width: 100%;
            box-sizing: border-box;
            border: 1px solid rgba(106, 193, 208, 0.1);
        }

        h1 {
            color: #5fb5d0;
            font-size: 28px;
            margin: 0 0 30px;
            font-weight: 700;
            line-height: 1.4;
        }

        .result-title {
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 25px;
            color: #2c3e50;
            line-height: 1.4;
            padding: 0 10px;
        }

        .result-text {
            font-size: 16px;
            margin-bottom: 30px;
            color: #456;
            line-height: 1.8;
            text-align: left;
            padding: 0 15px;
        }

        .percentages {
            margin: 30px auto;
            font-weight: 500;
            background: rgba(106, 193, 208, 0.05);
            padding: 20px;
            border-radius: 12px;
            color: #456;
            font-size: 16px;
            max-width: 500px;
            line-height: 1.6;
        }

        .character-image {
            width: 200px;
            height: auto;
            margin: 20px auto;
            display: block;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .character-name {
            font-size: 14px;
            color: #666;
            margin: 10px 0;
            text-align: center;
        }

        .cta-text {
            margin: 35px 0;
            color: #5fb5d0;
            font-weight: 500;
            font-size: 17px;
            line-height: 1.8;
            padding: 0 15px;
        }

        .btn {
            background: #06C755;
            color: #fff;
            border: none;
            padding: 18px 30px;
            font-size: 17px;
            font-weight: 500;
            cursor: pointer;
            border-radius: 30px;
            transition: all 0.3s ease;
            display: inline-block;
            text-decoration: none;
            margin: 10px auto;
            width: 100%;
            max-width: 300px;
            box-sizing: border-box;
            box-shadow: 0 5px 15px rgba(6, 199, 85, 0.3);
            text-align: center;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(6, 199, 85, 0.4);
            background: #05b34c;
        }

        .btn.secondary {
            background: #5fb5d0;
            box-shadow: 0 5px 15px rgba(95, 181, 208, 0.3);
            margin-top: 15px;
        }

        .btn.secondary:hover {
            box-shadow: 0 8px 20px rgba(95, 181, 208, 0.4);
            background: #54a9c4;
        }

        .button-container {
            text-align: center;
            margin-top: 30px;
        }

        .return-link {
            margin-top: 20px;
            color: #5fb5d0;
            text-decoration: none;
            font-size: 15px;
            display: inline-block;
            padding: 10px;
            transition: all 0.3s ease;
        }

        .return-link:hover {
            color: #4a90e2;
            transform: translateY(-1px);
        }

        @media (max-width: 480px) {
            body {
                padding: 15px;
            }

            .result-box {
                padding: 30px 20px;
                margin: 0 auto;
            }

            h1 {
                font-size: 24px;
                margin-bottom: 25px;
            }

            .result-title {
                font-size: 19px;
                margin-bottom: 20px;
                padding: 0 5px;
            }

            .result-text {
                font-size: 15px;
                margin-bottom: 25px;
                padding: 0 5px;
            }

            .percentages {
                margin: 25px auto;
                padding: 15px;
                font-size: 14px;
                border-radius: 10px;
            }

            .cta-text {
                margin: 30px 0;
                font-size: 15px;
                padding: 0 10px;
            }

            .btn {
                padding: 16px 25px;
                font-size: 16px;
                max-width: 280px;
            }

            .return-link {
                font-size: 14px;
                padding: 8px;
            }

            .character-image {
                width: 150px;
            }
        }

        .result-graphs {
            max-width: 600px;
            margin: 30px auto;
            padding: 20px;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(106, 193, 208, 0.1);
        }

        .graph-container {
            margin: 20px 0;
        }

        .graph-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-weight: 500;
            color: #2c3e50;
        }

        .graph-bar {
            width: 100%;
            height: 24px;
            background: #e9f5f7;
            border-radius: 12px;
            overflow: hidden;
        }

        .graph-fill {
            height: 100%;
            width: 0;
            background: linear-gradient(135deg, #6ac1d0 0%, #5fb5d0 100%);
            transition: width 1s ease;
        }
    </style>
</head>
<body>
    <div class="result-box">
        <h1>è¨ºæ–­çµæœ</h1>
        <div class="result-title" id="resultType"></div>
        <div class="result-text" id="resultText"></div>
        <div class="percentages" id="percentages"></div>
        <div id="character-container">
            <img id="character-image" class="character-image" alt="ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼">
            <div id="character-name" class="character-name"></div>
        </div>

        <div class="result-graphs">
            <div class="graph-container">
                <div class="graph-label">
                    <span id="type1-label"></span>
                    <span id="type1-percentage"></span>%
                </div>
                <div class="graph-bar">
                    <div class="graph-fill" id="type1-bar"></div>
                </div>
            </div>
            <div class="graph-container">
                <div class="graph-label">
                    <span id="type2-label"></span>
                    <span id="type2-percentage"></span>%
                </div>
                <div class="graph-bar">
                    <div class="graph-fill" id="type2-bar"></div>
                </div>
            </div>
            <div class="graph-container">
                <div class="graph-label">
                    <span id="type3-label"></span>
                    <span id="type3-percentage"></span>%
                </div>
                <div class="graph-bar">
                    <div class="graph-fill" id="type3-bar"></div>
                </div>
            </div>
        </div>

        <p class="cta-text">ã‚ãªãŸã®ã‚¿ã‚¤ãƒ—ã«åˆã‚ã›ãŸã‚¢ãƒ‰ãƒã‚¤ã‚¹ã§<br>ç†æƒ³ã®ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã¨ã®å‡ºä¼šã„ã‚’ã‚°ãƒƒã¨å¼•ãå¯„ã›ã¾ã™ï¼<br>ã¾ãšã¯ãŠæ°—è»½ã«ã”ç›¸è«‡ãã ã•ã„ğŸ˜Š</p>
        
        <div class="button-container">
            <a href="https://line.me/R/ti/p/@wcz8915w" class="btn" target="_blank">
                LINEå…¬å¼ã§ç„¡æ–™ç›¸è«‡ã‚’å—ã‘ã‚‹
            </a>

            <a href="index.html" class="btn secondary">
                è¨ºæ–­ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹
            </a>
        </div>
    </div>

    <script>
        // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç”»åƒã®ãƒãƒƒãƒ”ãƒ³ã‚°
        const characterImages = {
            "ã‚­ãƒ³ã‚°ã‚¿ã‚¤ãƒ—": {
                image: "img/king_type.png",
                name: "ã‚­ãƒ³ã‚°ã‚¿ã‚¤ãƒ—"
            },
            "ãƒŠã‚¤ãƒˆã‚¿ã‚¤ãƒ—": {
                image: "img/knight_type.png",
                name: "ãƒŠã‚¤ãƒˆã‚¿ã‚¤ãƒ—"
            },
            "ãƒ—ãƒªãƒ³ã‚¹ã‚¿ã‚¤ãƒ—": {
                image: "img/prince_type.png",
                name: "ãƒ—ãƒªãƒ³ã‚¹ã‚¿ã‚¤ãƒ—"
            },
            "ã‚¢ã‚¤ãƒ‰ãƒ«ã‚¿ã‚¤ãƒ—": {
                image: "img/idol_type.png",
                name: "ã‚¢ã‚¤ãƒ‰ãƒ«ã‚¿ã‚¤ãƒ—"
            },
            "ãƒãƒªã‚­ãƒ£ãƒªã‚¿ã‚¤ãƒ—": {
                image: "img/career_type.png",
                name: "ãƒãƒªã‚­ãƒ£ãƒªã‚¿ã‚¤ãƒ—"
            },
            "ãƒŠãƒ¼ã‚¹ã‚¿ã‚¤ãƒ—": {
                image: "img/nurse_type.png",
                name: "ãƒŠãƒ¼ã‚¹ã‚¿ã‚¤ãƒ—"
            },
            "ãƒãƒ©ãƒ³ã‚¹ã‚¿ã‚¤ãƒ—": {
                male: {
                    image: "img/balance_type_male.png",
                    name: "ãƒãƒ©ãƒ³ã‚¹ã‚¿ã‚¤ãƒ—ï¼ˆç”·æ€§ï¼‰"
                },
                female: {
                    image: "img/balance_type_female.png",
                    name: "ãƒãƒ©ãƒ³ã‚¹ã‚¿ã‚¤ãƒ—ï¼ˆå¥³æ€§ï¼‰"
                }
            }
        };

        // URLã‹ã‚‰è¨ºæ–­çµæœã¨ã‚¹ã‚³ã‚¢æƒ…å ±ã‚’å–å¾—
        const urlParams = new URLSearchParams(window.location.search);
        const resultType = urlParams.get('result');
        const userGender = urlParams.get('gender') || 'female';
        
        console.log("URL Parameters:", {
            resultType,
            userGender,
            scores: {
                king: urlParams.get('king'),
                knight: urlParams.get('knight'),
                prince: urlParams.get('prince')
            }
        });
        
        // æ€§åˆ¥ã«å¿œã˜ã¦ã‚¹ã‚³ã‚¢ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åã‚’å–å¾—
        const scores = userGender === 'male' 
            ? {
                king: parseInt(urlParams.get('king')) || 0,
                knight: parseInt(urlParams.get('knight')) || 0,
                prince: parseInt(urlParams.get('prince')) || 0
            }
            : {
                idol: parseInt(urlParams.get('idol')) || 0,
                career: parseInt(urlParams.get('career')) || 0,
                nurse: parseInt(urlParams.get('nurse')) || 0
            };

        console.log("Parsed Scores:", scores);

        // ãƒãƒ©ãƒ³ã‚¹ã‚¿ã‚¤ãƒ—ã®åˆ¤å®šã‚’è¡Œã†é–¢æ•°
        function isBalancedType(scores, gender) {
            if (gender === 'male') {
                const values = [scores.king, scores.knight, scores.prince];
                const max = Math.max(...values);
                const min = Math.min(...values);
                return (max - min) <= 5;
            } else {
                const values = [scores.idol, scores.career, scores.nurse];
                const max = Math.max(...values);
                const min = Math.min(...values);
                return (max - min) <= 5;
            }
        }

        // ãƒãƒ©ãƒ³ã‚¹ã‚¿ã‚¤ãƒ—ã‹ã©ã†ã‹ã‚’åˆ¤å®š
        const isBalanced = isBalancedType(scores, userGender);
        const displayType = isBalanced ? "ãƒãƒ©ãƒ³ã‚¹ã‚¿ã‚¤ãƒ—" : resultType;

        console.log("Display Type:", displayType);
        console.log("Is Balanced:", isBalanced);
        console.log("Available Types:", Object.keys(descriptions));

        // è¨ºæ–­çµæœã®èª¬æ˜ãƒ†ã‚­ã‚¹ãƒˆ
        const descriptions = {
            // å¥³æ€§å‘ã‘ã®èª¬æ˜
            "ã‚¢ã‚¤ãƒ‰ãƒ«ã‚¿ã‚¤ãƒ—": "ã‚¢ã‚¤ãƒ‰ãƒ«ã‚¿ã‚¤ãƒ—å¯„ã‚Šã®ã‚ãªãŸã¯ã€äººã‹ã‚‰å¤§åˆ‡ã«ã•ã‚Œã‚‹ã“ã¨ã«å¹¸ã›ã‚’æ„Ÿã˜ã‚‹ã€Œæ„›ã•ã‚Œã‚­ãƒ£ãƒ©ã€ã€‚æ˜ã‚‹ãå¯æ†ãªé›°å›²æ°—ã§ã€è‡ªç„¶ã¨äººã®è¦–ç·šã‚’é›†ã‚ã‚‹å­˜åœ¨ã§ã™ã€‚è‡ªåˆ†ã®æ„Ÿæƒ…ã‚’ç´ ç›´ã«è¡¨ç¾ã§ãã‚‹ãŸã‚ã€ä¸€ç·’ã«ã„ã‚‹äººã«å®‰å¿ƒæ„Ÿã¨ã¨ãã‚ãã‚’ä¸ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚<br><br>ã€å¼·ã¿ã€‘<br>ã‚ãªãŸã®æœ€å¤§ã®é­…åŠ›ã¯ã€ãã®ã¾ã¾ã§ã‚‚ã€Œæ„›ã•ã‚Œã‚‹åŠ›ã€ã€‚å–œæ€’å“€æ¥½ãŒãƒãƒƒã‚­ãƒªã—ã¦ã„ã¦ã€ç›¸æ‰‹ã«ã¨ã£ã¦ã¯ã‚ã‹ã‚Šã‚„ã™ãã€è¦ªã—ã¿ã‚„ã™ã„å­˜åœ¨ã§ã™ã€‚æ‹æ„›ã§ã¯ã€è‡ªåˆ†ã®æ°—æŒã¡ã‚’ç´ ç›´ã«ä¼ãˆã‚‰ã‚Œã‚‹ã“ã¨ãŒå¼·ã¿ã¨ãªã‚Šã€ç›¸æ‰‹ã¨ã®è·é›¢ã‚’ä¸€æ°—ã«ç¸®ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚<br><br>ã€æ°—ã‚’ã¤ã‘ãŸã„ç‚¹ã€‘<br>ã€Œã‚‚ã£ã¨æ„›ã•ã‚ŒãŸã„ã€ã¨ã„ã†æ€ã„ãŒå¼·ããªã‚Šã™ãã‚‹ã¨ã€ä¾å­˜çš„ã«ãªã£ãŸã‚Šã€ä¸å®‰å®šã•ãŒè¡¨ã«å‡ºã‚‹ã“ã¨ã‚‚ã€‚ç‰¹åˆ¥æ‰±ã„ã•ã‚Œãªã„ã¨ä¸æº€ã«æ„Ÿã˜ã‚‹å‚¾å‘ãŒã‚ã‚‹ãŸã‚ã€è‡ªåˆ†ã®ä¸­ã«ã€Œæ„›ã•ã‚Œã¦ã„ãªãã¦ã‚‚è‡ªåˆ†ã¯ä¾¡å€¤ãŒã‚ã‚‹ã€ã¨ã„ã†åŸºæº–ã‚’æŒã¤ã“ã¨ãŒå¤§åˆ‡ã§ã™ã€‚",

            "ãƒãƒªã‚­ãƒ£ãƒªã‚¿ã‚¤ãƒ—": "ãƒãƒªã‚­ãƒ£ãƒªã‚¿ã‚¤ãƒ—å¯„ã‚Šã®ã‚ãªãŸã¯ã€å†·é™ã§åˆ¤æ–­åŠ›ã«å„ªã‚ŒãŸé ¼ã‚Œã‚‹å­˜åœ¨ã€‚å¸¸ã«è½ã¡ç€ã„ãŸé›°å›²æ°—ã‚’ã¾ã¨ã„ã€å‘¨å›²ã‹ã‚‰ã®ä¿¡é ¼ã‚‚åšã„ã‚¿ã‚¤ãƒ—ã§ã™ã€‚æ„Ÿæƒ…ã‚ˆã‚Šã‚‚ç†æ€§ã‚’å¤§åˆ‡ã«ã—ã€è¨ˆç”»çš„ã‹ã¤è«–ç†çš„ã«ç‰©äº‹ã‚’é€²ã‚ã‚‹å§¿å‹¢ãŒå°è±¡çš„ã§ã™ã€‚<br><br>ã€å¼·ã¿ã€‘<br>è‡ªåˆ†ã®è»¸ãŒã‚ã‚Šã€ç‰©äº‹ã«ãƒ–ãƒ¬ãšã«å–ã‚Šçµ„ã‚ã‚‹åŠ›ãŒæœ€å¤§ã®é­…åŠ›ã€‚æ‹æ„›ã§ã‚‚ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã¨å¯¾ç­‰ã«å‘ãåˆã„ã€å …å®Ÿãªé–¢ä¿‚ã‚’ç¯‰ã“ã†ã¨ã—ã¾ã™ã€‚å‘¨å›²ã®çŠ¶æ³ã‚’å†·é™ã«æŠŠæ¡ã§ãã‚‹ãŸã‚ã€ä¿¡é ¼ã•ã‚Œã‚‹å­˜åœ¨ã¨ã—ã¦é•·ãæ„›ã•ã‚Œã‚‹å‚¾å‘ãŒã‚ã‚Šã¾ã™ã€‚<br><br>ã€æ°—ã‚’ã¤ã‘ãŸã„ç‚¹ã€‘<br>ã—ã£ã‹ã‚Šã—ã¦ã„ã‚‹åé¢ã€ã€Œéš™ãŒãªã„ã€ã€Œè¿‘å¯„ã‚ŠãŒãŸã„ã€ã¨è¦‹ã‚‰ã‚Œã¦ã—ã¾ã†ã“ã¨ã‚‚ã€‚ã¾ãŸã€æ„Ÿæƒ…ã‚’ã‚ã¾ã‚Šè¡¨ã«å‡ºã•ãªã„ãŸã‚ã€ã€Œä½•ã‚’è€ƒãˆã¦ã„ã‚‹ã®ã‹ã‚ã‹ã‚‰ãªã„ã€ã¨æ€ã‚ã‚Œã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚ã¨ãã«ã¯ç´ ç›´ãªå¼±ã•ã‚’è¦‹ã›ã‚‹ã“ã¨ãŒã€ä¿¡é ¼é–¢ä¿‚ã‚’æ·±ã‚ã‚‹ä¸€æ­©ã«ãªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚",

            "ãƒŠãƒ¼ã‚¹ã‚¿ã‚¤ãƒ—": "ãƒŠãƒ¼ã‚¹ã‚¿ã‚¤ãƒ—å¯„ã‚Šã®ã‚ãªãŸã¯ã€äººã®ä¸–è©±ã‚’ç„¼ãã®ãŒå¾—æ„ã§ã€è‡ªç„¶ã¨å‘¨å›²ã‚’ç™’ã›ã‚‹å­˜åœ¨ã€‚åŒ…å®¹åŠ›ãŒã‚ã‚Šã€ç›¸æ‰‹ã‚’æ€ã„ã‚„ã‚‹æ°—æŒã¡ãŒæ·±ãã€å„ªã—ã•ã«ã‚ãµã‚Œã¦ã„ã¾ã™ã€‚è½ã¡ç€ã„ãŸé›°å›²æ°—ã¨ã€ç›¸æ‰‹ã®æ°—æŒã¡ã«å¯„ã‚Šæ·»ã†åŠ›ã‚’ã‚ã‚ã›æŒã¤ã€å¿ƒã®æ”¯ãˆã®ã‚ˆã†ãªäººã§ã™ã€‚<br><br>ã€å¼·ã¿ã€‘<br>èª°ã«å¯¾ã—ã¦ã‚‚å„ªã—ãã€å—ã‘å…¥ã‚Œã‚‹å™¨ã®å¤§ãã•ãŒã‚ãªãŸã®é­…åŠ›ã§ã™ã€‚æ‹æ„›ã§ã‚‚ã€Œå®‰å¿ƒã§ãã‚‹ç›¸æ‰‹ã€ã¨ã—ã¦ä¿¡é ¼ã•ã‚Œã‚‹ã“ã¨ãŒå¤šãã€è‡ªç„¶ä½“ã§æ¥ã™ã‚‹ã“ã¨ã§ç›¸æ‰‹ã‚’ãƒªãƒ©ãƒƒã‚¯ã‚¹ã•ã›ã‚‹åŠ›ã‚’æŒã£ã¦ã„ã¾ã™ã€‚æ€ã„ã‚„ã‚Šã¨ç´°ã‚„ã‹ãªé…æ…®ãŒã€å®‰å®šã—ãŸé–¢ä¿‚æ€§ã‚’ç¯‰ãéµã«ãªã‚Šã¾ã™ã€‚<br><br>ã€æ°—ã‚’ã¤ã‘ãŸã„ç‚¹ã€‘<br>äººã«å°½ãã—ã™ãã¦ã€è‡ªåˆ†ã‚’å¾Œå›ã—ã«ã—ã¦ã—ã¾ã†ã“ã¨ã‚‚ã€‚ç›¸æ‰‹ã«åˆã‚ã›ã™ãã‚‹ã‚ã¾ã‚Šã€ã€Œéƒ½åˆã®ã„ã„å­˜åœ¨ã€ã«ãªã£ã¦ã—ã¾ã†å¯èƒ½æ€§ã‚‚ã‚ã‚Šã¾ã™ã€‚è‡ªåˆ†è‡ªèº«ã®æ°—æŒã¡ã‚„æ¬²æ±‚ã‚‚å¤§åˆ‡ã«ã—ã€ã€Œè‡ªåˆ†ã®å¹¸ã›ã€ã«ã¤ã„ã¦ã‚‚ã—ã£ã‹ã‚Šè€ƒãˆã‚‹ã“ã¨ãŒå¤§åˆ‡ã§ã™ã€‚",

            // ç”·æ€§å‘ã‘ã®èª¬æ˜
            "ã‚­ãƒ³ã‚°ã‚¿ã‚¤ãƒ—": "ã‚­ãƒ³ã‚°ã‚¿ã‚¤ãƒ—å¯„ã‚Šã®ã‚ãªãŸã¯ã€è‡ªä¿¡ã«æº€ã¡ã€ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã«ã‚ãµã‚ŒãŸé ¼ã‚Œã‚‹å­˜åœ¨ã€‚å ‚ã€…ã¨ã—ãŸæ…‹åº¦ã¨å®‰å®šæ„Ÿã§ã€å‘¨å›²ã‹ã‚‰è‡ªç„¶ã¨ä¸€ç›®ç½®ã‹ã‚Œã‚‹ã‚¿ã‚¤ãƒ—ã§ã™ã€‚ã—ã£ã‹ã‚Šã¨ã—ãŸä¾¡å€¤è¦³ã¨ä¿¡å¿µã‚’æŒã¡ã€è‡ªã‚‰ã®è€ƒãˆã«åŸºã¥ã„ã¦è¡Œå‹•ã—ã¾ã™ã€‚<br><br>ã€å¼·ã¿ã€‘<br>æ±ºæ–­åŠ›ãŒã‚ã‚Šã€è¿·ã„ãªãè¡Œå‹•ã§ãã‚‹ç‚¹ãŒå¤§ããªé­…åŠ›ã§ã™ã€‚æ‹æ„›ã§ã‚‚ã€Œé ¼ã‚Œã‚‹ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã€ã¨ã—ã¦ã®å­˜åœ¨æ„ŸãŒã‚ã‚Šã€ç›¸æ‰‹ã«å®‰å¿ƒæ„Ÿã¨ä¿¡é ¼ã‚’ä¸ãˆã‚‰ã‚Œã¾ã™ã€‚ãƒ–ãƒ¬ãªã„è»¸ã¨è²¬ä»»æ„Ÿã§ã€é•·æœŸçš„ãªé–¢ä¿‚ã‚’ç¯‰ãã“ã¨ã«ã‚‚å‘ã„ã¦ã„ã¾ã™ã€‚<br><br>ã€æ°—ã‚’ã¤ã‘ãŸã„ç‚¹ã€‘<br>è‡ªä¿¡ã®å¼·ã•ãŒã€Œä¿ºæ§˜ã£ã½ã„ã€ã€Œå¼·å¼•ã€ã¨å—ã‘å–ã‚‰ã‚Œã‚‹ã“ã¨ã‚‚ã€‚è‡ªåˆ†ã®è€ƒãˆã‚’æŠ¼ã—é€šã™ã‚ã¾ã‚Šã€ç›¸æ‰‹ã®æ„è¦‹ã‚’ç„¡è¦–ã—ã¦ã—ã¾ã‚ãªã„ã‚ˆã†æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚ç›¸æ‰‹ã®æ„Ÿæƒ…ã‚„ç«‹å ´ã«ã‚‚å¯„ã‚Šæ·»ã†ã“ã¨ã§ã€ã‚ˆã‚Šä¿¡é ¼ã•ã‚Œã‚‹é­…åŠ›ãŒé«˜ã¾ã‚Šã¾ã™ã€‚",

            "ãƒŠã‚¤ãƒˆã‚¿ã‚¤ãƒ—": "ãƒŠã‚¤ãƒˆã‚¿ã‚¤ãƒ—å¯„ã‚Šã®ã‚ãªãŸã¯ã€èª å®Ÿã§æ€ã„ã‚„ã‚ŠãŒã‚ã‚Šã€å…±æ„ŸåŠ›ã«å„ªã‚ŒãŸå„ªã—ã„äººç‰©ã€‚äººã®è©±ã«ã—ã£ã‹ã‚Šè€³ã‚’å‚¾ã‘ã€ç›¸æ‰‹ã®å¿ƒã«å¯„ã‚Šæ·»ã†ã“ã¨ãŒã§ãã‚‹ã€Œèãä¸Šæ‰‹ã€ã§ã™ã€‚è‡ªåˆ†ã‚ˆã‚Šã‚‚ç›¸æ‰‹ã‚’å„ªå…ˆã—ã¦è€ƒãˆã‚‹ã€çŒ®èº«çš„ãªä¸€é¢ãŒã‚ã‚Šã¾ã™ã€‚<br><br>ã€å¼·ã¿ã€‘<br>ä¿¡é ¼é–¢ä¿‚ã‚’ç¯‰ãã“ã¨ã«é•·ã‘ã¦ãŠã‚Šã€æ‹æ„›ã§ã‚‚ã€Œå®‰å¿ƒæ„Ÿã€ã€Œå®‰å®šæ„Ÿã€ã‚’ä¸ãˆã‚‰ã‚Œã‚‹å­˜åœ¨ã€‚ç›¸æ‰‹ã®æ°—æŒã¡ã‚’å¤§åˆ‡ã«ã™ã‚‹å§¿å‹¢ãŒä¼ã‚ã‚Šã€ã˜ã£ãã‚Šã¨é–¢ä¿‚ã‚’æ·±ã‚ã‚‹ã®ãŒå¾—æ„ã§ã™ã€‚ç„¡å„Ÿã®æ„›ã‚’æ³¨ã’ã‚‹ãã®å„ªã—ã•ãŒã€ã‚ãªãŸãªã‚‰ã§ã¯ã®é­…åŠ›ã§ã™ã€‚<br><br>ã€æ°—ã‚’ã¤ã‘ãŸã„ç‚¹ã€‘<br>å„ªã—ã•ãŒè£ç›®ã«å‡ºã¦ã€è‡ªå·±ä¸»å¼µã‚’é¿ã‘ãŒã¡ã«ãªã£ãŸã‚Šã€é æ…®ã—ã™ãã‚‹å‚¾å‘ãŒã‚ã‚Šã¾ã™ã€‚ã¾ãŸã€åˆºæ¿€ãŒå°‘ãªã„å°è±¡ã‚’ä¸ãˆã¦ã—ã¾ã„ã€æ‹æ„›ã®åˆæœŸæ®µéšã§ç›®ç«‹ã¡ã«ãã„ã“ã¨ã‚‚ã€‚è‡ªåˆ†ã®è€ƒãˆã‚„æ°—æŒã¡ã‚‚ã€ã—ã£ã‹ã‚Šã¨ä¼ãˆã‚‹ã“ã¨ã‚’å¿ƒãŒã‘ã‚‹ã¨ã‚ˆã‚Šé­…åŠ›ãŒé«˜ã¾ã‚Šã¾ã™ã€‚",

            "ãƒ—ãƒªãƒ³ã‚¹ã‚¿ã‚¤ãƒ—": "ãƒ—ãƒªãƒ³ã‚¹ã‚¿ã‚¤ãƒ—å¯„ã‚Šã®ã‚ãªãŸã¯ã€è‡ªç”±ã§ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªç™ºæƒ³åŠ›ã‚’æŒã¤ã€Œå¥½å¥‡å¿ƒã®ã‹ãŸã¾ã‚Šã€ã®ã‚ˆã†ãªå­˜åœ¨ã€‚å°‘å¹´ã®ã‚ˆã†ãªç„¡é‚ªæ°—ã•ã¨ã€ã©ã“ã‹ãƒŸã‚¹ãƒ†ãƒªã‚¢ã‚¹ãªä¸€é¢ãŒçµ¶å¦™ã«æ··ã–ã‚Šåˆã£ãŸé­…åŠ›ãŒã‚ã‚Šã¾ã™ã€‚å ´ã‚’æ˜ã‚‹ãã—ã€è‡ªç„¶ã¨äººã‚’æƒ¹ãã¤ã‘ã¾ã™ã€‚<br><br>ã€å¼·ã¿ã€‘<br>é£½ãã•ã›ãªã„ä¼šè©±ã‚„è¡Œå‹•åŠ›ãŒã‚ã‚Šã€æ‹æ„›ã§ã‚‚ã€Œä¸€ç·’ã«ã„ã¦æ¥½ã—ã„ã€ã€Œæ–°é®®ã€ã¨æ„Ÿã˜ã¦ã‚‚ã‚‰ãˆã‚‹å­˜åœ¨ã€‚æŸ”è»Ÿã§ãƒ•ãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚‚è»½ã„ãŸã‚ã€ã•ã¾ã–ã¾ãªã‚¿ã‚¤ãƒ—ã®äººã¨è‡ªç„¶ã«é–¢ã‚ã‚Œã¾ã™ã€‚è‡ªåˆ†ã‚‰ã—ã•ã‚’è²«ãå§¿å‹¢ãŒã€è‡ªç”±ãªé­…åŠ›ã¨ãªã£ã¦è¡¨ã‚Œã¾ã™ã€‚<br><br>ã€æ°—ã‚’ã¤ã‘ãŸã„ç‚¹ã€‘<br>è‡ªç”±ã‚’é‡è¦–ã™ã‚‹ã‚ã¾ã‚Šã€è²¬ä»»ã‚ã‚‹é–¢ä¿‚ã‚’é¿ã‘ãŸããªã‚‹å‚¾å‘ã‚‚ã€‚ã¾ãŸã€æ°—åˆ†å±‹ã«è¦‹ã‚‰ã‚ŒãŸã‚Šã€è½ã¡ç€ããŒãªã„ã¨èª¤è§£ã•ã‚Œã¦ã—ã¾ã†ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚ã¨ãã«ã¯ç›¸æ‰‹ã¨ã—ã£ã‹ã‚Šå‘ãåˆã„ã€çœŸå‰£ã•ã‚’è¦‹ã›ã‚‹ã“ã¨ã‚‚å¤§åˆ‡ã§ã™ã€‚",

            // ãƒãƒ©ãƒ³ã‚¹ã‚¿ã‚¤ãƒ—ã®èª¬æ˜
            "ãƒãƒ©ãƒ³ã‚¹ã‚¿ã‚¤ãƒ—": gender === 'female' ?
                "ã‚ãªãŸã¯ã€æ„›ã•ã‚Œã‚‹é­…åŠ›ã‚’æŒã¡ã¤ã¤ã‚‚ã€ç†æ€§çš„ã§è‡ªç«‹ã—ãŸå´é¢ã¨ã€å„ªã—ã•ã‚„å…±æ„ŸåŠ›ã‚‚ã‚ã‚ã›æŒã¤ã€éå¸¸ã«ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸã‚¿ã‚¤ãƒ—ã§ã™ã€‚å ´é¢ã‚„ç›¸æ‰‹ã«å¿œã˜ã¦è‡ªåˆ†ã®é­…åŠ›ã‚’ä½¿ã„åˆ†ã‘ã‚‰ã‚Œã‚‹ã€æŸ”è»Ÿæ€§ã¨åŒ…å®¹åŠ›ã®ã‚ã‚‹äººç‰©ã§ã™ã€‚<br><br>ã€å¼·ã¿ã€‘<br>æ„Ÿæƒ…ãƒ»æ€è€ƒãƒ»å…±æ„Ÿã®3è»¸ãŒæ•´ã£ã¦ãŠã‚Šã€ã©ã‚“ãªäººã¨ã‚‚è‡ªç„¶ã«ä¿¡é ¼é–¢ä¿‚ã‚’ç¯‰ãã“ã¨ãŒã§ãã¾ã™ã€‚ç”˜ãˆã‚‹ã“ã¨ã‚‚ã§ãã‚Œã°ã€é ¼ã‚‰ã‚Œã‚‹ã“ã¨ã«ã‚‚æ…£ã‚Œã¦ãŠã‚Šã€æ‹æ„›ã«ãŠã„ã¦ã¯ã€Œç†æƒ³ã®ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã€ã¨ã—ã¦é‡å®ã•ã‚Œã‚„ã™ã„å­˜åœ¨ã§ã™ã€‚<br><br>ã€æ°—ã‚’ã¤ã‘ãŸã„ç‚¹ã€‘<br>å™¨ç”¨ã«ç«‹ã¡å›ã‚Œã‚‹åˆ†ã€ã€Œè‡ªåˆ†ã¯ã©ã®ã‚¿ã‚¤ãƒ—ãªã®ã‹ã€ã¨è¿·ã„ãŒç”Ÿã˜ã‚‹ã“ã¨ã‚‚ã€‚ç›¸æ‰‹ã«åˆã‚ã›ã™ãã‚‹ã‚ã¾ã‚Šã€è‡ªåˆ†ã®æ°—æŒã¡ã‚’è¦‹å¤±ã£ã¦ã—ã¾ã†ã“ã¨ã‚‚ã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã¾ãŸã€è‡ªåˆ†ã®ç†æƒ³ãŒæ˜ç¢ºã«ãªã£ã¦ã„ãªã„å¯èƒ½æ€§ã‚‚ã‚ã‚‹ãŸã‚ã€ã€Œæœ¬å½“ã«å¤§åˆ‡ã«ã—ãŸã„ã‚‚ã®ã€ã«ç›®ã‚’å‘ã‘ã¦ã¿ã‚‹ã“ã¨ãŒå¤§åˆ‡ã§ã™ã€‚" :
                "ã‚ãªãŸã¯ã€ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã®ã‚ã‚‹ä¸€é¢ã¨ã€èª å®Ÿã§æ€ã„ã‚„ã‚Šæ·±ã„å§¿å‹¢ã€ãã—ã¦è‡ªç”±ã§ãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãªé­…åŠ›ã‚’å…¼ã­å‚™ãˆãŸã€ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸå­˜åœ¨ã§ã™ã€‚ã²ã¨ã¤ã®å‹ã«ãƒãƒã‚‰ãšã€æŸ”è»Ÿã«äººã‚„å ´é¢ã«å¿œã˜ã¦å¯¾å¿œã§ãã‚‹ã€Œä¸‡èƒ½å‹ã€ã¨è¨€ãˆã‚‹ã§ã—ã‚‡ã†ã€‚<br><br>ã€å¼·ã¿ã€‘<br>æ‹æ„›ã§ã¯ã€Œé ¼ã‚Œã‚‹å­˜åœ¨ã€ã€Œç™’ã—ã®å­˜åœ¨ã€ã€Œæ¥½ã—ã„å­˜åœ¨ã€ã¨ã„ã†ä¸‰æ‹å­ãŒæƒã£ã¦ãŠã‚Šã€ã©ã‚“ãªã‚¿ã‚¤ãƒ—ã®ç›¸æ‰‹ã«ã‚‚ãƒ•ã‚£ãƒƒãƒˆã—ã‚„ã™ã„ã®ãŒç‰¹é•·ã§ã™ã€‚ç©ºæ°—ã‚’èª­ã‚“ã§è¡Œå‹•ã§ãã‚‹å™¨ç”¨ã•ã¨ã€ç›¸æ‰‹ã®æ„Ÿæƒ…ã‚’æ±²ã¿å–ã‚‹å„ªã—ã•ãŒã‚ãªãŸã®é­…åŠ›ã§ã™ã€‚<br><br>ã€æ°—ã‚’ã¤ã‘ãŸã„ç‚¹ã€‘<br>å¤šé¢çš„ã§ã‚ã‚‹ãŒã‚†ãˆã«ã€Œçµå±€ã€è‡ªåˆ†ã¯ä½•ã‚’æ±‚ã‚ã¦ã„ã‚‹ã®ã‹ã€ãŒæ›–æ˜§ã«ãªã‚Šã‚„ã™ãã€ç›¸æ‰‹ã«åˆã‚ã›ã™ãã¦ç–²ã‚Œã¦ã—ã¾ã†ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚ã¾ãŸã€è‡ªåˆ†ã®ç†æƒ³ãŒæ˜ç¢ºã«ãªã£ã¦ã„ãªã„å¯èƒ½æ€§ã‚‚ã‚ã‚‹ãŸã‚ã€ã¨ãã«ã¯è‡ªåˆ†ã®ã€Œæœ¬éŸ³ã€ã¨ä¸å¯§ã«å‘ãåˆã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚"
        };

        // çµæœã‚’è¡¨ç¤º
        const resultTypeElement = document.getElementById("resultType");
        const resultTextElement = document.getElementById("resultText");
        const percentagesElement = document.getElementById("percentages");

        console.log("DOM Elements:", {
            resultTypeElement,
            resultTextElement,
            percentagesElement
        });

        if (resultTypeElement) resultTypeElement.textContent = `ã‚ãªãŸã®ã‚¿ã‚¤ãƒ—ã¯ã€Œ${displayType}ã€ã§ã™ï¼`;
        if (resultTextElement && descriptions[displayType]) {
            resultTextElement.innerHTML = descriptions[displayType];
        } else {
            console.error("Failed to set description:", {
                hasElement: !!resultTextElement,
                hasDescription: !!descriptions[displayType],
                displayType
            });
        }
        
        // ã‚¹ã‚³ã‚¢ã®è¡¨ç¤ºãƒ†ã‚­ã‚¹ãƒˆã‚’æ€§åˆ¥ã«å¿œã˜ã¦å¤‰æ›´
        const percentageText = userGender === 'male'
            ? `ã‚­ãƒ³ã‚°åº¦: ${scores.king}% / ãƒŠã‚¤ãƒˆåº¦: ${scores.knight}% / ãƒ—ãƒªãƒ³ã‚¹åº¦: ${scores.prince}%`
            : `ã‚¢ã‚¤ãƒ‰ãƒ«åº¦: ${scores.idol}% / ãƒãƒªã‚­ãƒ£ãƒªåº¦: ${scores.career}% / ãƒŠãƒ¼ã‚¹åº¦: ${scores.nurse}%`;
        
        if (percentagesElement) percentagesElement.textContent = percentageText;

        // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç”»åƒã‚’è¡¨ç¤º
        const characterContainer = document.getElementById("character-container");
        if (isBalanced) {
            const characterImage = document.getElementById("character-image");
            const characterName = document.getElementById("character-name");
            const balanceImage = characterImages["ãƒãƒ©ãƒ³ã‚¹ã‚¿ã‚¤ãƒ—"][userGender];
            console.log("Loading balanced image:", balanceImage.image);
            characterImage.onerror = function() {
                console.error("Failed to load image:", this.src);
                // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: ã‚¨ãƒ©ãƒ¼æ™‚ã«åˆ¥ã®ç”»åƒã‚’è©¦ã™
                this.src = encodeURI(balanceImage.image);
            };
            characterImage.src = balanceImage.image;
            characterImage.alt = balanceImage.name;
            characterName.textContent = balanceImage.name;
            characterContainer.style.display = "block";
        } else if (characterImages[displayType]) {
            const characterImage = document.getElementById("character-image");
            const characterName = document.getElementById("character-name");
            console.log("Loading type image:", characterImages[displayType].image);
            characterImage.onerror = function() {
                console.error("Failed to load image:", this.src);
                // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: ã‚¨ãƒ©ãƒ¼æ™‚ã«åˆ¥ã®ç”»åƒã‚’è©¦ã™
                this.src = encodeURI(characterImages[displayType].image);
            };
            characterImage.src = characterImages[displayType].image;
            characterImage.alt = characterImages[displayType].name;
            characterName.textContent = characterImages[displayType].name;
            characterContainer.style.display = "block";
        } else {
            characterContainer.style.display = "none";
        }

        // ã‚°ãƒ©ãƒ•ã®è¡¨ç¤ºå‡¦ç†
        if (userGender === 'female') {
            // å¥³æ€§ã®å ´åˆ
            document.getElementById('type1-label').textContent = 'ã‚¢ã‚¤ãƒ‰ãƒ«ã‚¿ã‚¤ãƒ—';
            document.getElementById('type2-label').textContent = 'ãƒãƒªã‚­ãƒ£ãƒªã‚¿ã‚¤ãƒ—';
            document.getElementById('type3-label').textContent = 'ãƒŠãƒ¼ã‚¹ã‚¿ã‚¤ãƒ—';
            
            document.getElementById('type1-percentage').textContent = urlParams.get('idol');
            document.getElementById('type2-percentage').textContent = urlParams.get('career');
            document.getElementById('type3-percentage').textContent = urlParams.get('nurse');
            
            document.getElementById('type1-bar').style.width = urlParams.get('idol') + '%';
            document.getElementById('type2-bar').style.width = urlParams.get('career') + '%';
            document.getElementById('type3-bar').style.width = urlParams.get('nurse') + '%';
        } else {
            // ç”·æ€§ã®å ´åˆ
            document.getElementById('type1-label').textContent = 'ã‚­ãƒ³ã‚°ã‚¿ã‚¤ãƒ—';
            document.getElementById('type2-label').textContent = 'ãƒŠã‚¤ãƒˆã‚¿ã‚¤ãƒ—';
            document.getElementById('type3-label').textContent = 'ãƒ—ãƒªãƒ³ã‚¹ã‚¿ã‚¤ãƒ—';
            
            document.getElementById('type1-percentage').textContent = urlParams.get('king');
            document.getElementById('type2-percentage').textContent = urlParams.get('knight');
            document.getElementById('type3-percentage').textContent = urlParams.get('prince');
            
            document.getElementById('type1-bar').style.width = urlParams.get('king') + '%';
            document.getElementById('type2-bar').style.width = urlParams.get('knight') + '%';
            document.getElementById('type3-bar').style.width = urlParams.get('prince') + '%';
        }
    </script>
</body>
</html>
